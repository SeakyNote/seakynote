木匠中有句行话，量两次，切一次，这种说法很适用于软件开发的构建部分。

构建高质量软件的程序员，都有一个共同的特征，即他们用的是高质量的实践。这样的实践在项目开始、中间和结束时始终都在强调质量。

如果在真正开始构建之前进行适当的准备工作，那么项目就能够以最佳状态运行。

软件开发中最常见的项目风险是糟糕的需求和糟糕的项目规划，因此，准备工作往往集中于改进需求和项目计划上。

当开发人员不知道如何做前期准备工作时，建议做更多的前期准备工作听起来就毫无意义：如果工作一开始就没有做好，那么做得再多也是徒劳！

只要做几个大的项目，就知道很多压力是可以通过提前计划来避免的。个人经历是你最好的导师。

管理人员并不关注那些做足构建前期准备的程序员，这是出了名的。

软件开发真的并不只是编码。

你可以换一份工作。尽管经济有起有落，但优秀的程序员长期以来都供不应求（美国劳工统计局，2002），既然有那么多更好的选择，生命苦短，何必在一家不开明的编程机构里浪费时间呢。

有效编程的关键思想之一是重视前期准备工作。在着手开始一个大的项目之前，要精心计划好项目，这是有意义的。大的项目需要更多规划；小的项目需要较少的规划。从管理的角度来看，计划意味着确定项目所需要的时间、人员和计算机的数量。从技术的角度来看，计划意味着理解你想要构建什么，这样就不至于浪费钱去构建错误的东西。有时，用户一开始并不能完全确定自己想要什么，因此可能需要花费比理想情况下更大的力气才能找出他们真正想要的。但相比构建错误的东西而不得不扔掉并重新开始，这样做成本更低。

程序员处于软件“食物链”的末端。架构师“消化”需求；设计者“消化”架构：编码“消化”设计。

在编程中，如果在食物链的每个阶段都有健康的食物，最终结果就是快乐的程序员编写出健康的代码。

第一次就把事情做好是最合算的。非必要的改动会让你付出昂贵的代价。

发现错误的时间要尽可能接近于引入该错误的时间。缺陷在软件“食物链”中停留的时间越长，造成的破坏越多。需求是最先完成的，所以，需求缺陷可能在系统中存在的时间更长，并且成本更高。软件上游引入的缺陷也比软件下游引入的缺陷影响更为广泛。因此，早期引入的缺陷代价更高。

在一个项目中，只是重点关注尽早纠正缺陷，就可以将开发成本和时间减少一半或降到更低。尽早发现并解决问题，本身就是一个良性的激励。

商业系统项目往往受益于高度迭代的方法，在这种方法中，规划、需求和架构与构建、系统测试和质量保证活动交织在一起。生命攸关系统往往要求采用更加序列化的方法，需求稳定性是确保超高等级可靠性的必备条件之一。

有些作者断言，使用迭代技术的项目根本不需要过多地关注前期准备工作。但是，这种观点是错误的。迭代方法倾向于减少前期准备不足所造成的影响，但并不能消除它。

无论是使用迭代方法还是序列式，关注前期准备工作都可以降低成本。由于诸多原因，所以迭代方法通常是更好的选择，但是，与密切关注前期准备工作的序列式项目相比，忽略前期准备工作的迭代项目的成本可能要高得多。

大多数项目既不完全采用序列式开发，也不是完全采用迭代式开发。预先详细说明100%的需求或预先设计虽然不切实际，但是对绝大多数项目来说，尽早把那些关键的需求要素和架构要素确定下来，这是很有价值的。
一个常见的经验法则是，预先确定大约80%的需求，为以后再确定的额外需求预留时间，然后采用系统化的变更控制，以确保随着项目的进展只接受最有价值的新需求。另一种选择是预先确定最重要的20%需求，并计划以小的增量来开发软件的其余部分，然后随着时间的推移来确定新增的需求和设计。

如果存在下述情况，那么可能会选择序列式（注重前期准备）方法。
- 需求相当稳定。
- 设计很简单，也很容易理解。
- 开发团队熟悉应用程序领域。
- 项目几乎没有风险。
- 长期的可预测性很重要。
- 后期变更需求、设计和代码的成本可能很昂贵。

可能会因为下列原因选择迭代（走着瞧）方法。
- 需求没有得到充分理解，或者出于其他原因，而认为它们不稳定。
- 设计是复杂的、有挑战性的，或者两者兼而有之。
- 开发团队不熟悉应用程序领域。
- 项目有很多风险。
- 长期的可预测性并不重要。
- 后期变更需求、设计和代码的成本可能很低。

事实上，在软件开发中，与序列式方法的适用场景相比，迭代方法的适用场景多得多。要想使前期准备适用于具体项目，根据需要调整其正式程度和完备程度即可。

问题定义要使用用户的语言，并且应该从用户的角度描述问题。它通常不应该用计算机术语来表述。最好的解决方案未必是计算机程序。

如果问题的定义不精准，那么我们可能会将精力放在解决错误的问题上。

未能定义问题的后果是，可能会浪费大量时间来解决错误的问题。这是一个双重处罚，因为正确的问题并没有得到正确的解决。

充分详尽地描述需求是项目成功的关键，甚至可能比有效的构建技术更重要。

“需求好比水。冻结之后，才更容易在上面开展工作。”——佚名

开发过程能帮助客户更好地理解他们自己的需求，这是需求变更的主要来源。计划严格遵循需求行事，其实就是不打算对客户的要求做出回应。

IBM 和其他公司的研究发现，平均水平的项目，在开发过程中需求会有25%的变化。需求变更产生的返工占到返工总量的75%~85%。

进度和成本这两个词比咖啡和冷水浴更容易让人清醒，许多必须有的东西很快就会变成有就最好。
如果组织对先做需求分析的重要性并不敏感，就要指出，在需求阶段进行修改比之后进行修改的成本低得多。

如果需求特别糟糕或者不稳定，并且前面的建议都不可行，就取消这个项目。即使无法真的取消这个项目，也设想一下取消之后会怎样。在取消之前，想想它可能会变得多糟糕。假设在某种情况下可以放弃这个项目，那么至少也要认真考虑，目前的情况和设想的情况有多大距离。

架构的质量决定着系统的概念完整性。这反过来又决定着系统的最终质量。一个经过慎重考虑过的架构从顶层到底层维护系统的架构完整性提供了必备的结构和体系，它为程序员提供了指引——其细节程度要与程序员的技能和手头儿的工作相匹配。它将工作分为几个部分，以便多个开发人员或多个开发团队能够独立工作。

架构变更如同需求变更一样，看似很小的一个改动，影响却可能非常深远。无论是想修正错误还是改进设计而引发的架构变更，越早识别出变更越好。

“有些事情，如果你无法向一个六岁的孩子解释清楚，则说明你自己还没有能够真正理解。”——爱因斯坦

应该明确定义各个组件的责任。每个组件应该负责某个区域的事情，并且对其他组件负责的区域，知道的越少越好。通过使各个组件对其他组件知道的最少，你能将设计的信息局限于各个组件之内。
应该明确定义每个组件的通信原则。对于每个组件，架构应当能够描述它能直接使用哪些组件，能间接使用哪些组件，以及不能使用哪些组件。

架构应当记述曾经考虑过的其他的类设计方案，并给出选择当前的组织结构的理由。架构无须详细说明系统中的每一个类。瞄准 80/20原则：对构成系统80%的行为的20%的类进行详细说明。

精心设计的用户界面架构决定了最终做出来的是人见人爱的程序还是没人爱用的程序。
架构应该模块化，以便在用户界面替换时不影响业务规则和程序的输出部分。例如，架构应当使我们很容易做到：砍掉交互式界面的类，插人一组命令行的类。这种替换能力常常很有用，尤其是因为命令行界面便于单元级别和子系统级别的软件测试。

健壮性是系统在检测到错误后继续运行的能力。通常架构考虑的系统要比需求期望的系统更健壮。理由之一是，如果组成系统的各个部分都只能在最低限度上满足健壮性要求，那么系统整体上是达不到所要求的健壮程度的。在软件中，链条的强度不是取决于最薄弱的一环，而是等于所有薄弱环节的乘积。架构应当清楚地指出程序员应当为了谨馍起见宁可进行过度工程，还是应该做出最简单能工作的东西。

如果架构没有使用现成的组件，就应该说明自己定制的组件应该在哪些方面胜过现成的程序库和组件。

如果开发计划采用业已存在的软件、测试用例、数据格式或其他原料，那么架构应该说明：如何对复用的软件进行加工，使之符合其他架构目标——如果需要使之符合。

“设计缺陷通常很不易觉察出来，并且，随着系统的新特性或新用途的添加加上早期的假设被遗忘才显现出来。”——柯巴托

架构应当描述所有主要决策的动机。提防“我们向来都是这么做的”这种自认为是的说法。有一个这样的故事，贝丝想按照她丈夫家祖传的广受好评的炖肉菜谱来做一锅炖肉。她的丈夫阿卜杜勒说，他母亲是这样教他的：先撒上盐和胡椒，然后去掉两端，最后放在平底锅里盖上盖子炖。贝丝就问了：“为什么要去头去尾呢？”阿卜杜勒回答说：“我不知道。我向来这么做。这得问一下我的母亲。”他给母亲打电话，母亲说：“我不知道。我一直都是这么做的。这得问一下你的祖母。”他母亲打电话给祖母，祖母回答说：“我不知道你为什么要去头去尾。我这么做，是因为我的锅太小了，装不下。”

一般来说，一个运行良好的项目会在需求、架构和其他前期准备方面投入10%~20%的工作量和20%~30%的时间 （McConnell 1998, Kruchten2000）。这不包括详细设计所花的时间，那是构建活动的一部分。

如果需求在任何项目上都不稳定，无论正式项目还是非正式项目，那就将需求分析工作视为独立的项目来做。在完成需求之后，预估项目剩余部分的时间。这是一个明智的方法，因为在弄清楚正在做的是什么之前，没人相信你能估算出合理的进度表。就好比你是一个承包商，被叫去盖房子。客户问，做这项工作要花多少钱？你当然有理由问他想让你做什么？客户说：“我不能告诉你，但告诉我你要多少钱？”你该明智地感谢客户浪费了自己的时间，然后转身回家。
对于一栋建筑，还没有等客户告诉你要建什么就先出价，显然是不合理的。客户呢，也不希望你在建筑师完成蓝图之前就摆出木料、椰头和钉子开始忙活儿，开始花他们的钱。然而，人们对软件开发的理解，往往不如对建筑所用的木条和石膏板的理解，因此，客户可能无法“秒懂”为什么需求分析需要列为单独的项目。为此，可能需要给他们一个解释。
当为软件架构分配时间时，使用与对待需求分析类似的方法。如果软件是一种以前从未使用过的软件，那么请留出更多的时间来考虑在新领域中进行设计时的不确定性。确保创建良好的架构所需的时间不会被“为做好其他方面工作所需的时间”挤占。如果需要，还可以将架构作为单独的项目来规划。

- 构建准备的首要目标是降低风险。确保你的准备活动可以减少而不是增加风险
- 如果你想开发高质量的软件，那么从开始到结束，对质量的关注必须是软件开发过程的一部分。在项目初期关注质量，对产品质量的正面影响比在项目末尾关注质量的影响要大。
- 程序员的一部分工作是教育老板和合作者，告诉他们软件开发过程，包括在编程开始前做好充分准备的重要性。
- 你所从事的项目类型对构建活动的前期准备有很大影响，有些项目应该是高度迭代的，有些项目应该是序列式的。
- 如果没有明确的问题定义，那么你有可能会在构建期间解决错误的问题。
- 如果没有做完良好的需求分析工作，你可能没有察觉待解决的问题的重要细节。如果需求变更发生在构建之后的阶段，那么其代价是在项目早期更改需求的20 到100倍。因此，在开始编程之前，需要确定需求已经到位。
- 如果没有做完良好的架构设计，那么你可能会在构建期间用错误的方法解决正确的问题。架构变更的代价随着为错误的架构编写的代码数量增加而增加，因此，也要碗保架构已经到位了。
